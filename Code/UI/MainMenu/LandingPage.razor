@using Sandbox;
@using Sandbox.UI;

@implements INavigatorPage
@namespace HC2

<root>
    <div class="canvas">
        <div class="column">
            <div class="title">
                HC2
            </div>

            <div class="column gap" style="width: 256px;">
                @if (MenuRoot.Instance?.IsPauseMenu ?? false)
                {
                    <div class="button" onclick=@ResumeButton>Resume</div>
                }
                else
                {
                    <div class="button" @onclick="@(() => Play() )">Play</div>
                }
                <a class="button" href="/characters">Characters</a>
                <div class="button" @onclick="@(() => Quit() )">@((MenuRoot.Instance?.IsPauseMenu ?? false) ? "Quit to Main Menu" : "Quit")</div>
            </div>
        </div>
    </div>
</root>

@code
{
    void Quit()
    {
        if (MenuRoot.Instance?.IsPauseMenu ?? false)
        {
            Scene.LoadFromFile("scenes/menu.scene");
        }
        else
        {
            Game.Close();
        }
    }

    async void Play()
    {
        bool joined = await global::Networking.TryJoinLobby();
        if (!joined)
        {
            var sceneFile = ResourceLibrary.Get<SceneFile>("scenes/procgen.scene");
            Scene.Load(sceneFile);
        }
    }

    void ResumeButton()
    {
        PauseMenu.Instance.IsOpen = false;
    }
}
